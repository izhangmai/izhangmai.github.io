---
layout: post

title: "iOS类似设置界面通用库的封装"

date: 2017-7-18 17:00:00

author: 胡绍辉

tags: iOS
---

## 库想法和由来
​
基本每个App都有设置界面,设置一些常见的功能，头像、昵称、个人签名等等。常规的设置界面比如微信设置界面，个人资料界面，复杂的设置界面比如含有IM的群设置界面，知乎App的设置界面。当设置界面设置的功能太多，或者设置界面在App中有太多的地方都需要使用时，对我们开发者来说，就是一件痛苦的事，只是换了数据源而已。通用做法写一个tableView各种判断。其实仔细一想这种类似界面其实跟IM聊天的会话界面类似，消息会话界面一般包含文本​消息、图片消息、语言消息、自定义消息。鉴于之前IM的UI逻辑，于是封装的想法油然而生，封装后大家和自己用起来都很方便了。

## 库的技术选择
​*  a.设计模式 -> MVC
​*  b.界面布局 -> 代码AutoLayout,包括适配ipad
​*  c.图片下载 -> 依赖SDWebImage
​ 
* 
关于设计模式，经典的设计模式比如MVC。其它的设计模式MVVM、MVP、MVCS可以阅读[这篇文章](http://www.cocoachina.com/ios/20150525/11919.html)
因为涉及到的内容没有IM复杂，只是对界面进行简单的逻辑封装和UI处理，所以这里并没有使用其它设计模式所以c采用了MVC。对于一个复杂的即时通讯的话，应该是多种模式的结合处理会更好，这里推荐一个网易的开源UI组件
[开源UI组件](https://github.com/netease-im/NIM_iOS_UIKit)
​
* 关于布局，本库关于界面的控件并不是太多。参考环信库，UI也是用NSLayoutConstraint布局。减少依赖，自定义cell你可以使用自带布局或者第三方库布局，由于本库采用了很多继承关系，暂不支持xib/storyBoard。需要代码实现界面布局。

* 关于图片下载，做好一个完整的图片下载并不是一件容易的事,既然有成熟第三方库SDWebImage,何不站在巨人肩膀上依赖下呢？

## 库的架构图
![](/img/post/Library/Architecture.png)
